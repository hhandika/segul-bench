---
title: "SEGUL Benchmark"
output: html_document
---

```{r}
library(here)
library(ggplot2)
library(readr)
library(dplyr)
library(stringr)
```


```{r}
bench <- readr::read_csv(here("data", "benchmark_results.csv")) |>
  dplyr::mutate_at("cpu_usage", stringr::str_remove_all, "%") |>
  dplyr::mutate_at("cpu_usage", readr::parse_number)
```

```{r}
plot_bench <- function(.analyses) {
  bench |>
  dplyr::filter(analyses == .analyses) |>
  ggplot(aes(x = execution_time_secs, y = ram_usage_Mb, color = programs, shape = dataset)) +
    geom_point() +
    theme_classic() +
    labs(x = "Execution time (secs)", y = "Memory usage (kb)")
}

```

### Plot summary

```{r}
plot_bench(.analyses = "Summary statistics")

ggsave(here("figures", "summary_stats.png"), width = 8, height = 4, units = "in")
```

```{r}
concat_bench |>
  dplyr::mutate("ram_usage_gb" = ram_usage_Mb/1e3) |>
  ggplot(aes(x = execution_time_secs, y = ram_usage_gb, color = programs, shape = dataset)) +
    geom_point() +
    theme_classic() +
    labs(x = "Execution time (secs)", y = "RAM usage (Gb)")

ggsave(here("figures", "concat_stats.png"), width = 8, height = 4, units = "in")
```

